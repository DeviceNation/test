Java.perform(function () {
    var Camera = Java.use('android.hardware.Camera');

    // Enhance logging to check if methods are called
    Camera.setPreviewCallback.overload('android.hardware.Camera$PreviewCallback').implementation = function (callback) {
        console.log('setPreviewCallback called');
        this.setPreviewCallback(callback);
        console.log('Original setPreviewCallback executed');
    };

    Camera.setPreviewCallbackWithBuffer.overload('android.hardware.Camera$PreviewCallback').implementation = function (callback) {
        console.log('setPreviewCallbackWithBuffer called');
        this.setPreviewCallbackWithBuffer(callback);
        console.log('Original setPreviewCallbackWithBuffer executed');
    };

    // If Camera.startPreview is called without setting callback, it might reset the callbacks
    Camera.startPreview.implementation = function () {
        console.log('startPreview called');
        this.startPreview();
        console.log('Original startPreview executed');
    };
});